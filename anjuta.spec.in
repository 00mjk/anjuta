%define	desktop_vendor	anjuta
%define	name		anjuta
%define	version		@VERSION@
%define	release		1
%define	serial		1

Summary:	GNOME IDE for C and C++
Name:		%{name}
Version:	%{version}
Release:	%{release}
Serial:		%{serial}
Copyright:	GPL2
Group:		Development/Tools
URL:		http://anjuta.org/
Vendor:		Naba Kumar <naba@gnome.org>
Source:		%{name}-%{version}.tar.gz
BuildRoot:	/var/tmp/%{name}-%{version}
Docdir:		%{_docdir}
Requires:	glib >= 1.2.8, gtk+ >= 1.2.8, gnome-libs >= 1.2.8, scrollkeeper >= 0.1.4, libxml >= 1.4.0, libxml < 2.0.0, ORBit >= 0.5.0, gnome-print >= 0.35, gdk-pixbuf, libglade >= 0.15, pcre >= 3.9
BuildRequires:	glib-devel >= 1.2.8, gtk+-devel >= 1.2.8, gnome-libs >= 1.2.8, scrollkeeper >= 0.1.4, libxml >= 1.4.0, libxml < 2.0.0, libxml-devel, ORBit >= 0.5.0, ORBit-devel, gnome-print-devel >= 0.35, gdk-pixbuf-devel, libglade-devel, pcre-devel

Distribution:	Any
Packager:	Naba Kumar <naba@gnome.org>

%description
Anjuta is a versatile Integrated Development Environment (IDE) for C and C++. 
It has been written for GTK/GNOME, and features a number of advanced 
programming facilities. It is basically a GUI interface for the collection 
of command line programming utilities and tools available for the GNU system. 
These are usually run via a text console, and can be unfriendly to use.

%package i18n
Summary: Anjuta i18n Translations
Group: Development/Tools

%description i18n
Translations of Anjuta UI elements in various languages.

%package docs-en
Summary: Anjuta docuemntation in English.
Group: Development/Tools

%description docs-en
Anjuta documentation in English.

%package docs-ja
Summary: Anjuta docuemntation in Japanese.
Group: Development/Tools

%description docs-ja
Anjuta documentation in Japanese.

%prep
%setup -q

%build
%configure --enable-final
make %{?_smp_mflags}

%install
rm -rf %{buildroot}
%makeinstall

if desktop-file-install --help >/dev/null 2>&1; then
mkdir -p %{buildroot}%{_datadir}/applications
desktop-file-install --vendor %{desktop_vendor} --delete-original \
  --dir %{buildroot}%{_datadir}/applications                      \
  --add-category X-Red-Hat-Base                                   \
  --add-category Application                                      \
  --add-category Development                                      \
  %{buildroot}%{_datadir}/gnome/apps/Development/%{name}.desktop
fi

%clean
rm -rf %{buildroot}

%post
scrollkeeper-update || :

%postun
scrollkeeper-update || :

%files
%doc AUTHORS COPYING ChangeLog INSTALL NEWS README THANKS TODO
%doc doc/ScintillaDoc.html

%defattr(-,root,root)
%{_bindir}/%{name}*
%{_libdir}/%{name}
%{_datadir}/%{name}
%{_datadir}/applications/*%{name}.desktop
%{_datadir}/pixmaps/%{name}
%{_datadir}/doc/%{name}
%{_datadir}/mime-info/anjuta.mime
%{_datadir}/mimelnk/application/x-anjuta-project.desktop
%{_mandir}/man1/*

%files i18n
%defattr(-, root, root)
%{_datadir}/locale

%files docs-en
%defattr(-, root, root)
%{_datadir}/gnome/help/%{name}
%{_datadir}/omf/%{name}/%{name}-*-C.omf
%{_localstatedir}/scrollkeeper/*

%files docs-ja
%defattr(-, root, root)
%{_datadir}/gnome/help/%{name}/ja
%{_datadir}/omf/%{name}/%{name}-*-ja*.omf

