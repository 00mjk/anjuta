%define	name		anjuta
%define	version		@VERSION@
%define	release		1
%define	serial		1
%define	prefix		/usr

Summary:	GNOME IDE for C and C++
Name:		%{name}
Version:	%{version}
Release:	%{release}
Serial:		%{serial}
Copyright:	GPL2
Group:		Development/Tools
URL:		http://anjuta.org/
Vendor:		Naba Kumar <naba@gnome.org>
Source:		%{name}-%{version}.tar.gz
BuildRoot:	/var/tmp/%{name}-%{version}
Docdir:		%{_docdir}

Requires:		glib2 >= @GLIB_REQUIRED@, \
				gtk+2 >= @GTK_REQUIRED@, \
				ORBit2 >= @ORBIT_REQUIRED@, \
				libglade2 >= @LIBGLADE_REQUIRED@, \
				libgnome >= @GNOME_REQUIRED@,
				libgnomeui >= @GNOME_UI_REQUIRED@, \
				libgnomeprint >= @GNOME_PRINT_REQUIRED@, \
				libgnomeprintui >= @GNOME_PRINT_UI_REQUIRED@, \
				libgnomeprint >= @GNOME_PRINT_REQUIRED@, \
				gnome-vfs2 >= @GNOME_VFS_REQUIRED@, \
				libbonobo >= @BONOBO_REQUIRED@,
				libbonoboui >= @BONOBO_UI_REQUIRED@, \
				vte >= @VTE_REQUIRED@, \
				libzvt2 >= @ZVT_REQUIRED@, \
				libxml2 >= @LIBXML_REQUIRED@, \
				pango >= @PANGO_REQUIRED@
			
BuildRequires:	glib2-devel >= @GLIB_REQUIRED@, \
				gtk+2-devel >= @GTK_REQUIRED@, \
				ORBit2-devel >= @ORBIT_REQUIRED@, \
				libglade2-devel >= @LIBGLADE_REQUIRED@, \
				libgnome-devel >= @GNOME_REQUIRED@,
				libgnomeui-devel >= @GNOME_UI_REQUIRED@, \
				libgnomeprint-devel >= @GNOME_PRINT_REQUIRED@, \
				libgnomeprintui-devel >= @GNOME_PRINT_UI_REQUIRED@, \
				libgnomeprint-devel >= @GNOME_PRINT_REQUIRED@, \
				gnome-vfs2-devel >= @GNOME_VFS_REQUIRED@, \
				libbonobo-devel >= @BONOBO_REQUIRED@,
				libbonoboui-devel >= @BONOBO_UI_REQUIRED@, \
				vte-devel >= @VTE_REQUIRED@, \
				libzvt2-devel >= @ZVT_REQUIRED@, \
				libxml2-devel >= @LIBXML_REQUIRED@, \
				pango-devel >= @PANGO_REQUIRED@

Distribution:	Any
Packager:	Naba Kumar <naba@gnome.org>

%description
Anjuta is a versatile Integrated Development Environment (IDE) for C and C++. 
It has been written for GTK/GNOME, and features a number of advanced 
programming facilities. It is basically a GUI interface for the collection 
of command line programming utilities and tools available for the GNU system. 
These are usually run via a text console, and can be unfriendly to use.

%package i18n
Summary: Anjuta i18n Translations
Group: Development/Tools

%description i18n
Translations of Anjuta UI elements in various languages.

%package docs-en
Summary: Anjuta docuemntation in English.
Group: Development/Tools

%description docs-en
Anjuta documentation in English.

%package docs-ja
Summary: Anjuta docuemntation in Japanese.
Group: Development/Tools

%description docs-ja
Anjuta documentation in Japanese.

%prep
%setup

%build
CFLAGS="$RPM_OPT_FLAGS" ./configure --prefix=%prefix --enable-final

if [ "$SMP" != "" ]; then
  (make "MAKE=make -k -j $SMP"; exit 0)
  make
else
  make
fi

%install
[ -n "$RPM_BUILD_ROOT" -a "$RPM_BUILD_ROOT" != / ] && rm -rf $RPM_BUILD_ROOT

make prefix=$RPM_BUILD_ROOT%{prefix} install

%clean
[ -n "$RPM_BUILD_ROOT" -a "$RPM_BUILD_ROOT" != / ] && rm -rf $RPM_BUILD_ROOT

%files
%doc AUTHORS COPYING ChangeLog INSTALL NEWS README THANKS TODO
%doc doc/ScintillaDoc.html

%defattr(-,root,root)
%{prefix}/bin/anjuta
%{prefix}/bin/anjuta_launcher
%{prefix}/bin/anjuta_import.sh
%{prefix}/lib/anjuta
%{prefix}/share/gnome/apps/Development/anjuta.desktop
%{prefix}/share/anjuta
%{prefix}/share/pixmaps/anjuta
%{prefix}/share/doc/anjuta
%{prefix}/share/mime-info/anjuta.mime
%{prefix}/share/mimelnk/application/x-anjuta-project.desktop
%{prefix}/man/man1/anjuta.1.gz
%{prefix}/man/man1/anjuta_launcher.1.gz
%{prefix}/share/locale/*/LC_MESSAGES/anjuta.mo
