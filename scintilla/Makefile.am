## Process this file with automake to produce Makefile.in

SUBDIRS = include

noinst_LIBRARIES = libscintilla.a

INCLUDES = -I$(srcdir)/include $(GTK_CFLAGS)

AM_CXXFLAGS = -DGTK -DSCI_LEXER -DUSE_XIM

include $(srcdir)/lexers.make

libscintilla_a_SOURCES =\
	AutoComplete.cxx \
	CallTip.cxx \
	CellBuffer.cxx \
	ContractionState.cxx \
	ExternalLexer.cxx \
	ExternalLexer.h \
	Document.cxx \
	DocumentAccessor.cxx \
	Editor.cxx \
	Indicator.cxx \
	KeyMap.cxx \
	KeyWords.cxx \
	LineMarker.cxx \
	PlatGTK.cxx \
	PropSet.cxx \
	RESearch.cxx \
	ScintillaBase.cxx \
	ScintillaGTK.cxx \
	Style.cxx \
	StyleContext.cxx\
	UniConversion.cxx \
	ViewStyle.cxx \
	WindowAccessor.cxx \
	AutoComplete.h \
	CallTip.h \
	CellBuffer.h \
	ContractionState.h \
	Document.h \
	DocumentAccessor.h \
	Editor.h \
	Indicator.h \
	KeyMap.h \
	LineMarker.h \
	RESearch.h \
	SVector.h \
	ScintillaBase.h \
	Style.h \
	UniConversion.h \
	ViewStyle.h\
	StyleContext.h\
	XPM.h\
	XPM.cxx\
	$(LEXER_SRCS)

noinst_PROGRAMS = test-scintilla
test_scintilla_CXXFLAGS = -DGTK
test_scintilla_SOURCES = test-scintilla.cxx
test_scintilla_LDADD = \
	$(ANJUTA_LIBS) \
	$(top_builddir)/scintilla/libscintilla.a
test_scintilla_DEPENDENCIES = $(top_builddir)/scintilla/libscintilla.a

update-scintilla:
	cp $(srcdir)/scintilla/gtk/*.cxx $(srcdir)/
	cp $(srcdir)/scintilla/src/*.cxx $(srcdir)/
	cp $(srcdir)/scintilla/src/*.h $(srcdir)/
	cp $(srcdir)/scintilla/include/*.h $(srcdir)/include/
	cp $(srcdir)/scintilla/include/*.py $(srcdir)/include/
	cp $(srcdir)/scintilla/include/*.iface $(srcdir)/include/
	echo "## Lexers make file" > lexers.make
	echo 'LEXER_OBJS = \' >> lexers.make;
	echo -n '	$$(top_srcdir)/scintilla/StyleContext.o' >> lexers.make
	for lex in Lex*.cxx; do \
		lex=`echo $$lex | sed -e "s/cxx$$/o/"`; \
		echo '\' >> lexers.make; \
		echo -n '	$$(top_srcdir)/scintilla/' >> lexers.make; \
		echo -n "$$lex" >> lexers.make; \
	done
	echo "" >> lexers.make
	echo "" >> lexers.make
	echo -n 'LEXER_SRCS = ' >> lexers.make
	for lex in Lex*.cxx; do \
		echo '\' >> lexers.make; \
		echo -n "	$$lex" >> lexers.make; \
	done
	echo "" >> lexers.make
	echo "Patching files ..."
	for patchfile in patches/*.diff; do \
		patch -p1 < $$patchfile; \
	done

EXTRA_DIST=lexers.make
